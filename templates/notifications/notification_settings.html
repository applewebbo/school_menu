{% extends 'base.html' %}
{% load crispy_forms_tags static %}
{% block page_title %}
    Notifiche
{% endblock page_title %}

{% block add_js %}
    <script src="{% static 'js/webpush.js' %}"></script>
{% endblock add_js %}

{% block content %}
    <div class="container mx-auto mb-8 max-w-screen-lg">
        <div class="grid px-4 pt-8 pb-4 mx-auto max-w-screen-xl lg:gap-8 lg:pt-16 lg:pb-8 xl:gap-0">
            <h1 class="mb-4 text-2xl font-semibold tracking-tight text-center">Notifiche Men√π Giornaliero</h1>
            <div class="py-3 px-5 mt-3 md:py-4 md:px-6">
                {% if school %}
                    <p>
                        Questo dispositivo riceve notifiche giornaliere relative al menu di: <span class="font-bold">{{ school.name }}</span>
                    </p>
                    <div class="flex gap-2 justify-end mt-4">
                        <button hx-post="{% url 'notifications:test_notification' %}"
                            hx-target="#test-notification-result"
                            hx-swap="innerHTML"
                            class="btn btn-primary btn-soft"
                            type="button">
                            Test Notifica
                        </button>
                        <button class="btn btn-primary btn-soft"
                                hx-post="{% url 'notifications:delete_subscription' %}">
                            Disabilita notifiche
                        </button>
                    </div>
                    <div id="test-notification-result" class="mt-4"></div>
                {% else %}
                    {% include "notifications/partials/subscription_form.html" %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock content %}
