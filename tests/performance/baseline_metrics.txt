Performance Test Baseline Metrics
================================================================================

================================================================================
Test: school_list_baseline
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE NOT (NOT "school_menu_school"."is_published")


================================================================================
Test: school_list_optimized
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE NOT (NOT "school_menu_school"."is_published")


================================================================================
Test: school_detail_baseline
Total Queries: 5
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE "school_menu_school"."slug" = 'collegio-distanza-donna-johnsonport' LIMIT 21

Query 2:
SELECT "users_user"."id", "users_user"."password", "users_user"."last_login", "users_user"."is_superuser", "users_user"."first_name", "users_user"."last_name", "users_user"."is_staff", "users_user"."is_active", "users_user"."date_joined", "users_user"."email", "users_user"."tc_agreement" FROM "users_user" WHERE "users_user"."id" = 1 LIMIT 21

Query 3:
SELECT DISTINCT "school_menu_simplemeal"."type" AS "type", "school_menu_simplemeal"."day" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 2 AND "school_menu_simplemeal"."week" = 4) ORDER BY "school_menu_simplemeal"."day" ASC

Query 4:
SELECT "school_menu_simplemeal"."id", "school_menu_simplemeal"."day", "school_menu_simplemeal"."week", "school_menu_simplemeal"."season", "school_menu_simplemeal"."type", "school_menu_simplemeal"."school_id", "school_menu_simplemeal"."menu", "school_menu_simplemeal"."morning_snack", "school_menu_simplemeal"."afternoon_snack" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 2 AND "school_menu_simplemeal"."week" = 4 AND "school_menu_simplemeal"."day" = 2 AND "school_menu_simplemeal"."type" = 'S') LIMIT 21

Query 5:
SELECT "school_menu_simplemeal"."id", "school_menu_simplemeal"."day", "school_menu_simplemeal"."week", "school_menu_simplemeal"."season", "school_menu_simplemeal"."type", "school_menu_simplemeal"."school_id", "school_menu_simplemeal"."menu", "school_menu_simplemeal"."morning_snack", "school_menu_simplemeal"."afternoon_snack" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 2 AND "school_menu_simplemeal"."week" = 4 AND "school_menu_simplemeal"."type" = 'S') ORDER BY "school_menu_simplemeal"."day" ASC


================================================================================
Test: school_detail_optimized
Total Queries: 5
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE "school_menu_school"."slug" = 'liceo-mentre-filo-lake-lisashire' LIMIT 21

Query 2:
SELECT "users_user"."id", "users_user"."password", "users_user"."last_login", "users_user"."is_superuser", "users_user"."first_name", "users_user"."last_name", "users_user"."is_staff", "users_user"."is_active", "users_user"."date_joined", "users_user"."email", "users_user"."tc_agreement" FROM "users_user" WHERE "users_user"."id" = 1 LIMIT 21

Query 3:
SELECT DISTINCT "school_menu_simplemeal"."type" AS "type", "school_menu_simplemeal"."day" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 1 AND "school_menu_simplemeal"."week" = 3) ORDER BY "school_menu_simplemeal"."day" ASC

Query 4:
SELECT "school_menu_simplemeal"."id", "school_menu_simplemeal"."day", "school_menu_simplemeal"."week", "school_menu_simplemeal"."season", "school_menu_simplemeal"."type", "school_menu_simplemeal"."school_id", "school_menu_simplemeal"."menu", "school_menu_simplemeal"."morning_snack", "school_menu_simplemeal"."afternoon_snack" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 1 AND "school_menu_simplemeal"."week" = 3 AND "school_menu_simplemeal"."day" = 2 AND "school_menu_simplemeal"."type" = 'S') LIMIT 21

Query 5:
SELECT "school_menu_simplemeal"."id", "school_menu_simplemeal"."day", "school_menu_simplemeal"."week", "school_menu_simplemeal"."season", "school_menu_simplemeal"."type", "school_menu_simplemeal"."school_id", "school_menu_simplemeal"."menu", "school_menu_simplemeal"."morning_snack", "school_menu_simplemeal"."afternoon_snack" FROM "school_menu_simplemeal" WHERE ("school_menu_simplemeal"."school_id" = 1 AND "school_menu_simplemeal"."season" = 1 AND "school_menu_simplemeal"."week" = 3 AND "school_menu_simplemeal"."type" = 'S') ORDER BY "school_menu_simplemeal"."day" ASC


================================================================================
Test: api_schools_baseline
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE "school_menu_school"."is_published"


================================================================================
Test: api_schools_optimized
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE "school_menu_school"."is_published"


================================================================================
Test: search_baseline
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE (NOT (NOT "school_menu_school"."is_published") AND ("school_menu_school"."name" LIKE '%school%' ESCAPE '\' OR "school_menu_school"."city" LIKE '%school%' ESCAPE '\'))


================================================================================
Test: search_optimized
Total Queries: 1
================================================================================

Query 1:
SELECT "school_menu_school"."id", "school_menu_school"."name", "school_menu_school"."slug", "school_menu_school"."city", "school_menu_school"."user_id", "school_menu_school"."start_day", "school_menu_school"."start_month", "school_menu_school"."end_day", "school_menu_school"."end_month", "school_menu_school"."season_choice", "school_menu_school"."week_bias", "school_menu_school"."menu_type", "school_menu_school"."is_published", "school_menu_school"."no_gluten", "school_menu_school"."no_lactose", "school_menu_school"."vegetarian", "school_menu_school"."special", "school_menu_school"."annual_menu" FROM "school_menu_school" WHERE (NOT (NOT "school_menu_school"."is_published") AND ("school_menu_school"."name" LIKE '%school%' ESCAPE '\' OR "school_menu_school"."city" LIKE '%school%' ESCAPE '\'))

================================================================================
Response Time Benchmark: school_list_percentiles
================================================================================
Mean: 17.16ms
Min: 14.80ms
Max: 179.72ms
Stddev: 16.43ms
p50 (median): 15.43ms
p95: 16.51ms
p99: 178.11ms
================================================================================


================================================================================
Response Time Benchmark: school_list_percentiles
================================================================================
Mean: 15.63ms
Min: 14.65ms
Max: 34.97ms
Stddev: 2.05ms
p50 (median): 15.33ms
p95: 16.44ms
p99: 34.81ms
================================================================================


================================================================================
Response Time Benchmark: school_detail_percentiles
================================================================================
Mean: 9.11ms
Min: 8.31ms
Max: 27.69ms
Stddev: 1.92ms
p50 (median): 8.82ms
p95: 9.71ms
p99: 27.52ms
================================================================================


================================================================================
Response Time Benchmark: api_schools_percentiles
================================================================================
Mean: 8.70ms
Min: 8.08ms
Max: 26.34ms
Stddev: 1.82ms
p50 (median): 8.46ms
p95: 9.07ms
p99: 26.18ms
================================================================================


================================================================================
Response Time Benchmark: search_percentiles
================================================================================
Mean: 1.56ms
Min: 1.28ms
Max: 19.21ms
Stddev: 1.79ms
p50 (median): 1.34ms
p95: 1.67ms
p99: 19.04ms
================================================================================

================================================================================
Response Size Test: tailwind_css
================================================================================
Uncompressed: 160413 bytes (156.65 KB)
Compressed (gzip): 21620 bytes (21.11 KB)
Compression ratio: 13.5%
Size reduction: 86.5% (138793 bytes saved)
================================================================================


================================================================================
Response Size Test: school_list_html
================================================================================
Uncompressed: 70736 bytes (69.08 KB)
Compressed (gzip): 11325 bytes (11.06 KB)
Compression ratio: 16.0%
Size reduction: 84.0% (59411 bytes saved)
================================================================================


================================================================================
Response Size Test: school_detail_html
================================================================================
Uncompressed: 29691 bytes (29.00 KB)
Compressed (gzip): 8544 bytes (8.34 KB)
Compression ratio: 28.8%
Size reduction: 71.2% (21147 bytes saved)
================================================================================


================================================================================
Response Size Test: school_list_html
================================================================================
Uncompressed: 70991 bytes (69.33 KB)
Compressed (gzip): 11376 bytes (11.11 KB)
Compression ratio: 16.0%
Size reduction: 84.0% (59615 bytes saved)
================================================================================


================================================================================
Response Size Test: school_detail_html
================================================================================
Uncompressed: 29809 bytes (29.11 KB)
Compressed (gzip): 8563 bytes (8.36 KB)
Compression ratio: 28.7%
Size reduction: 71.3% (21246 bytes saved)
================================================================================


================================================================================
Response Size Test: api_schools_list_json
================================================================================
Uncompressed: 12518 bytes (12.22 KB)
Compressed (gzip): 3026 bytes (2.96 KB)
Compression ratio: 24.2%
Size reduction: 75.8% (9492 bytes saved)
================================================================================


================================================================================
Response Size Test: api_school_menu_json
================================================================================
Uncompressed: 4462 bytes (4.36 KB)
Compressed (gzip): 453 bytes (0.44 KB)
Compression ratio: 10.2%
Size reduction: 89.8% (4009 bytes saved)
================================================================================


================================================================================
Response Size Test: tailwind_css
================================================================================
Uncompressed: 160413 bytes (156.65 KB)
Compressed (gzip): 21620 bytes (21.11 KB)
Compression ratio: 13.5%
Size reduction: 86.5% (138793 bytes saved)
================================================================================


================================================================================
Response Size Test: htmx_min_js
================================================================================
Uncompressed: 48102 bytes (46.97 KB)
Compressed (gzip): 15669 bytes (15.30 KB)
Compression ratio: 32.6%
Size reduction: 67.4% (32433 bytes saved)
================================================================================


================================================================================
Response Size Test: alpine_min_js
================================================================================
Uncompressed: 44758 bytes (43.71 KB)
Compressed (gzip): 16210 bytes (15.83 KB)
Compression ratio: 36.2%
Size reduction: 63.8% (28548 bytes saved)
================================================================================

================================================================================
Database Connection Test: connection_reuse
================================================================================
Database engine: sqlite
CONN_MAX_AGE: 0
Connection PID 1: 4511806832
Connection PID 2: 4511806832
Connection PID 3: 4511806832
Connection reused: Yes
================================================================================


================================================================================
Database Connection Test: connection_info
================================================================================
Database engine: sqlite
Database name: file:memorydb_default?mode=memory&cache=shared
Connection pooling: Built-in
Note: Active connection count monitoring only available for PostgreSQL
================================================================================


================================================================================
Database Connection Test: conn_max_age_config
================================================================================
Database engine: django.db.backends.sqlite3
CONN_MAX_AGE: 0
Connection pooling: Disabled
Recommendation: Consider enabling CONN_MAX_AGE for better performance
================================================================================

================================================================================
Cache Performance Test: cache_hit_rate_school_list
================================================================================
Total requests: 100
Warmup requests: 5
Estimated cache hits: 0
Estimated cache hit rate: 0.0%
Average response time: 18.19ms
Min response time: 14.86ms
Max response time: 28.15ms
Note: Hit rate estimation based on response time <10ms
================================================================================


================================================================================
Cache Performance Test: response_time_with_cache
================================================================================
Average response time (no cache): 16.69ms
Average response time (with cache): 14.85ms
Speedup ratio: 1.12x
Time saved per request: 1.84ms
Expected with caching: <50ms cached, 10-50x speedup
Actual performance: Good
================================================================================


================================================================================
Cache Performance Test: cache_invalidation_on_update
================================================================================
Initial school count: 100
Test modification: Updated school name
Cache cleared: Yes
Content changed after clear: Yes
Updated data visible: Yes
Cache invalidation: Working
================================================================================


================================================================================
Cache Performance Test: cache_key_generation
================================================================================
School 1: Scuola conto particolare
School 2: Scuola storia amore
URL 1: /menu/scuola-conto-particolare-laurenton/
URL 2: /menu/scuola-storia-amore-port-kyle/
Responses are different: Yes
Cache key generation: Working
================================================================================

================================================================================
Memory Usage Test: school_list_memory_usage
================================================================================
Number of samples: 5
Max memory usage: 163.70 MB
Average memory usage: 161.32 MB
Min memory usage: 158.81 MB
Memory range: 4.89 MB
Max memory threshold: 500 MB
Memory check: PASS
================================================================================


================================================================================
Memory Usage Test: school_list_memory_usage
================================================================================
Number of samples: 19
Max memory usage: 163.42 MB
Average memory usage: 163.41 MB
Min memory usage: 163.41 MB
Memory range: 0.02 MB
Max memory threshold: 500 MB
Memory check: PASS
================================================================================


================================================================================
Memory Usage Test: school_detail_memory_usage
================================================================================
Number of samples: 14
Max memory usage: 164.84 MB
Average memory usage: 164.82 MB
Min memory usage: 164.81 MB
Memory range: 0.03 MB
Max memory threshold: 500 MB
Memory check: PASS
================================================================================


================================================================================
Memory Usage Test: api_schools_list_memory_usage
================================================================================
Number of samples: 13
Max memory usage: 165.06 MB
Average memory usage: 165.06 MB
Min memory usage: 165.06 MB
Memory range: 0.00 MB
Max memory threshold: 500 MB
Memory check: PASS
================================================================================


================================================================================
Memory Usage Test: memory_leak_detection
================================================================================
Number of requests: 10
Number of samples: 18
Max memory usage: 165.56 MB
Average memory usage: 165.35 MB
Min memory usage: 165.28 MB
Memory growth: 0.28 MB
Leak detection threshold: 100 MB growth
Potential leak detected: NO
================================================================================

================================================================================
Task Performance Test: notification_task_baseline
================================================================================
Total subscribers: 100
Number of schools: 10
Subscribers per school: 10
Total database queries: 101
Total duration: 159.23ms
Time per subscriber: 1.59ms
Queries per subscriber: 1.01
Expected after optimization: <10 queries total
Performance: Needs optimization (N+1 detected)
================================================================================


================================================================================
Task Performance Test: notification_task_baseline
================================================================================
Total subscribers: 100
Number of schools: 10
Subscribers per school: 10
Total database queries: 101
Total duration: 144.26ms
Time per subscriber: 1.44ms
Queries per subscriber: 1.01
Expected after optimization: <10 queries total
Performance: Needs optimization (N+1 detected)
================================================================================


================================================================================
Task Performance Test: notification_task_different_times
================================================================================
Test description: Performance across different notification times
Notification times tested: 4
previous_day_6pm - queries: 11
previous_day_6pm - duration: 8.11ms
same_day_9am - queries: 11
same_day_9am - duration: 8.10ms
same_day_12pm - queries: 11
same_day_12pm - duration: 7.37ms
same_day_6pm - queries: 11
same_day_6pm - duration: 7.21ms
================================================================================


================================================================================
Task Performance Test: notification_task_query_pattern
================================================================================
Total queries: 4
School queries: 3
Notification queries: 1
Meal queries: 0
Other queries: 0
Optimization needed: Yes - multiple school queries detected
================================================================================
